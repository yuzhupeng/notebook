# InlineHook(和热补丁技术类似,之前已经用过了,只是没单独说出来)

- 在内存中对要拦截的函数进行定位，从而得到它的内存地址
- 把这个函数起始的几个字节保存到我们自己的内存中
- 使用jmp指令来覆盖这个函数起始的几个字节，这条jmp指令用来跳转到我们的替代函数的内存地址。
- 当然，我们的替代函数的函数签名必须与要拦截的函数的函数签名完全相同：所有的参数必须相同，返回值必须相同，调用约定也必须相同
- 现在，当线程调用被拦截函数的时候，跳转指令实际上会跳转到我们的替代函数。这时，我们就可以执行自己想要执行的任何代码
- 为了撤销对函数的拦截，需要把第二步保存下来的字节放回被拦截函数起始的几个字节中
- 我们调用被拦截函数（现在已经不再对它进行拦截了），让函数执行它正常处理
- 当原来的函数返回时，我们再次执行第二步和第三步，这样替代函数将来还会被调用到